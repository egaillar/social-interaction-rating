<!DOCTYPE html>
<html>
    <head>
        <title>Social Interaction Ratings</title>
        <script src="jspsych.js"></script>
        <script src="plugin-instructions.js"></script>
        <script src="plugin-html-keyboard-response.js"></script>
        <script src="plugin-video-keyboard-response.js"></script>
        <script src="EG-html-slider-track-responses.js"></script>
        <link href="jspsych.css" rel="stylesheet" type="text/css"></link>
    </head>
    <body></body>
    <script>

const jsPsych = initJsPsych({
        override_safe_mode: true
    });

    var instructions = {
        type: jsPsychInstructions,
        pages: ['<p style="font-size:30px;">In this experiment, you are going to see short videos of people in social settings.</p><br>',
        '<p style="font-size:30px;">Below each video, you will see a sliding scale as shown in the example below:</p><br>' +
        '<br>' +
        '<img src="instruct1.png"></img>',
        '<p style="font-size:30px;">While the video plays, please drag the slider continuously to indicate how you feel about the social setting shown in the video</p><br>' +
        '<br>' +
        '<img src="instruct2.png"></img>',
        '<p style="font-size:30px;">Continue to move the slider as the video plays so that the position of the slider accurately reflects your impression of the social setting, which may change.</p><br>',
        '<p style="font-size:30px;">Please pay attention and try your best!</p><br><br><p style="font-size:25px;">Click "Next" to begin the experiment.</p>'
        ],
        key_forward: 'ArrowRight',
        key_backward: 'ArrowLeft',
        show_clickable_nav: true,
    }

    var video_rating_procedure = {
        timeline: [
            {
                type: jsPsychHtmlKeyboardResponse,
                stimulus: '<p style="font-size:80px;">+</p>',
                choices: jsPsych.NO_KEYS,
                trial_duration: 3000,
                response_ends_trial: false
            },
            {
                type: jsPsychVideoSliderResponse,
                stimulus: jsPsych.timelineVariable('vid'),
                prompt: '<p style="font-size:23px;">Please move the slider as you watch the video.</p>',
                width: 900,
                height: 700,
                stop: 30,
                labels: ['<p style="font-size:23px;">Negative</p>', '<p style="font-size:23px;">Positive</p>'],
                response_ends_trial: false,
                trial_ends_after_video: true,
                track_slider_history: true,
                on_finish: function(data) {
		            console.log(data);
	            }
            }
        ],
        timeline_variables: [
            {vid: ['VIRAT_1.mp4']},
            {vid: ['VIRAT_2.mp4']},
            {vid: ['VIRAT_3.mp4']},
            {vid: ['VIRAT_4.mp4']},
        ],
        randomize_order: true
    }

    var timeline = [instructions, video_rating_procedure]
    jsPsych.run(timeline)
   
   </script>

</html>