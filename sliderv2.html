<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Social Interaction Ratings</title>
    <!-- include jsPsych -->
    <script src="https://unpkg.com/jspsych@7.0.0"></script>
    <link href="https://unpkg.com/jspsych@7.0.0/css/jspsych.css" rel="stylesheet" type="text/css" />
    <!-- include jsPsych plugins -->
    <script src="https://unpkg.com/@jspsych/plugin-preload@1.0.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@1.0.0"></script>
    <script src="EG-html-slider-track-responses.js"></script>
    <script src="https://unpkg.com/@jspsych/plugin-video-keyboard-response@1.1.1"></script>

    <style>
      html, body {
          height: 100%;
          margin: 0;
          padding: 0;
      }
      #video-wrapper {
          margin-top: 50px; /* Adjust this value as needed */
          text-align: center;
      }
    </style>
</head>
<body>

  <div id="video-container">
    <div id="video-wrapper"></div>
</div>

<script>
    // initialize jsPsych
    const jsPsych = initJsPsych({
        override_safe_mode: true
    });

    const instruction_trial1 = {
        type: jsPsychHtmlKeyboardResponse,
        stimulus: '<p style="font-size:30px;">In this experiment, you are going to see videos of people in social settings</p><br><br><p style="font-size:25px;">Press [SPACE] to continue</p>',
        choices: [' '],
        response_ends_trial: true
    }

    var video_rating_procedure = {
        timeline: [
            {
                type: jsPsychHtmlKeyboardResponse,
                stimulus: '<p style="font-size:80px;">+</p>',
                choices: jsPsych.NO_KEYS,
                trial_duration: 3000,
                response_ends_trial: false
            },
            {
                type: jsPsychVideoSliderResponse,
                stimulus: jsPsych.timelineVariable('vid'),
                prompt: '<p style="font-size:23px;">Please move the slider as you watch the video.</p>',
                width: 900,
                height: 700,
                stop: 30,
                labels: ['<p style="font-size:23px;">Negative</p>', '<p style="font-size:23px;">Positive</p>'],
                response_ends_trial: false,
                trial_ends_after_video: true,
                track_slider_history: true,
                on_finish: function(data) {
		            console.log(data);
	            }
            }
        ],
        timeline_variables: [
            {vid: ['VIRAT_1.mp4']},
            {vid: ['VIRAT_2.mp4']},
            {vid: ['VIRAT_3.mp4']},
            {vid: ['VIRAT_4.mp4']},
            {vid: ['VIRAT_5.mp4']},
        ],
        randomize_order: true
    }

    var timeline = [instruction_trial1, video_rating_procedure]
    jsPsych.run(timeline)
</script>
</body>
</html>